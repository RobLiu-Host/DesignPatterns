# DesignPatterns
2020-3-14
设计模式-Java 第一篇

1.单例模式 Single
    需求场景 
    需要 频繁的进行创建和销毁的对象、创建对象时耗时过多或耗费资源过多(即：重量级
         对象)，但又经常用到的对象、 工具类对象、频繁访问数据库或文件的对象(比如 数据源、session  工厂等)
     android 使用地方 EventBus获取实例就是使用的dcl式单例
    实现说明 通过隐藏构造函数 通过特有的函数获取实例
    注意事项：饿汉式单例 当类被创建就创建类单例 可以使用静态内部类创建单例
             懒汉式单例 先加入synchronized关键字锁住函数 又锁住类实例（Singleton.class）防止代码重排序问题 不加这个关键字会引起线程安全问题
             锁住类的概念：只要访问这个类 就会涉及到同步         
             对应实例引用需要加volatile原子性
             原子性的概念：1.保证此变量对所有的线程的可见性，这里的“可见性”，如本文开头所述，当一个线程修改了这个变量的值，
             volatile 保证了新值能立即同步到主内存，以及每次使用前立即从主内存刷新。但普通变量做不到这点，普通变量的值在线程间传递均需要通过主内存
             当没有明确需要锁住某个实例 只是单纯的需要同步某个代码快 我们可以这么做 byte[] lock = new byte[0];只有三行操作码
    

